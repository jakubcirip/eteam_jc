<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>localization.md.html</title>
    <link rel="stylesheet" href="https://stackedit.io/style.css" />
  </head>

  <body class="stackedit">
    <div class="stackedit__html">
      <h1 id="localization">Localization</h1>
      <p>
        Our latest production projects all uses our new localization system,
        here is how it works:
      </p>
      <ol>
        <li>Write code using $localize()</li>
        <li>Extract language</li>
        <li>
          Upload localization file to
          <a href="http://Localazy.com">Localazy.com</a>
        </li>
        <li>Write translations on Localazy</li>
        <li>Download localization files from Localazy</li>
        <li>Build and deploy app</li>
        <li>
          (FUTURE) Implement automatic integration to always re-build and
          re-deploy project when a new reviewed language change happens on
          Localazy
        </li>
      </ol>
      <h2 id="localize-on-frontend-angular">$localize on FrontEnd (Angular)</h2>
      <h3 id="in-html">In HTML</h3>
      <p>Example:</p>
      <pre><code>&lt;p  i18n="benefits_component - description@@snvGx6l"&gt;This text gets translated&lt;/p&gt;
</code></pre>
      <p>
        <code>benefits_component</code> stands for main identifier and
        <code>description</code> is a secondary identifier for a translator to
        be able to find this translation on a website (to translate with
        context). <code>snvGx6l</code> is unique ID, this has to be different
        for each text. This ID is generated by taking
        <code>Date.now()</code> and converting it to Base62. We have created
        Alfred shortcut, feel free to ask for it (when I press CMD+A, it
        automatically generates ID with current date. Each time I press it, it
        is unique).
      </p>
      <p>
        To translate HTML parameter (such as input placeholder, you can use
        almost identical syntax. Using this logic, you can translate
        <strong>any</strong> html parameter.<br />
        Example:
      </p>
      <pre><code>&lt;input placeholder="Mobile number or email"  i18n-placeholder=" intro_component - right panel input label@@snvG3i5"  /&gt;
</code></pre>
      <p>
        To localize text in Typescript file, you use $localize method.
        Localization always starts with <code>:</code>, then continues with main
        and secondary description. Finally, you provide unique ID, and
        configuration with second <code>:</code> and everything after that is
        text that will be translated.<br />
        Example:
      </p>
      <pre><code>const routeServices = $localize`:routing - route@@smQCdQZ:services`;
</code></pre>
      <h2 id="localize-on-backend-nodejs">$localize on BackEnd (NodeJS)</h2>
      <p>
        Localization on backend is almost identical to frontend, so please read
        that first. Syntax to localize text on backend uses same $localize
        function as frontend with one difference: you need to call it under
        request.<br />
        Example:
      </p>
      <pre><code>let errorMsg = req.$localize(':errors - error 400@@so9ajLQ:Wrong info provided.');
</code></pre>
      <p>
        By calling <code>$localize</code> under <code>req</code>, the system
        automatically detects user language using cookies. If you (for some
        reason) do not have <code>req</code>, we strongly recommend using some
        system to find out the language. For example, when sending email from a
        different service, you can always add a new column into the database and
        put the user’s language in there when requesting email.
      </p>
      <h2 id="icu">ICU</h2>
      <p>
        Localization on both frontend and backend supports pluralization and
        selection.<br />
        For example:
      </p>
      <pre><code>Adam has 1 apple.
Eva has 2 apples.

He has 1 apple.
She has 2 apples.
</code></pre>
      <p>
        To achieve this, we use library
        <a href="https://www.npmjs.com/package/@messageformat/core"
          >@messageformat/core</a
        >. You can find examples how to use it on their NPM package page. You
        can simply put the <code>{}</code> syntax into the message and it will
        be converted using middleware.
      </p>
    </div>
  </body>
</html>
